<div class="fixed inset-0 bg-black/50 flex items-center justify-center z-50">
  <div class="bg-white rounded-lg shadow-lg w-96 p-6 relative">
    <!-- Conteúdo do modal -->
    <h2 class="text-xl font-bold mb-4">{{ !!aluno?.id ? 'Editar' : 'Novo' }} aluno</h2>
    <div class="pb-5">
      <form [formGroup]="form">
        <div>
          <label class="block mb-1 font-medium text-gray-700">Nome</label>
          <input
            type="text"
            formControlName="nome"
            class="w-full border rounded-lg p-2 focus:ring-2 focus:ring-blue-500"
            placeholder="Digite o nome"
          />
          @if (f['nome'].touched && f['nome'].invalid) {
          <div class="text-red-500 text-sm mt-1">
            @if (f['nome'].errors?.['required']) {
            <span>Nome é obrigatório.</span>
            } @if (f['nome'].errors?.['minlength']) {
            <span>Nome deve ter ao menos 3 caracteres.</span>
            }
          </div>
          }
        </div>
        <div>
          <label class="block mb-1 font-medium text-gray-700">Data de Nascimento</label>
          <input
            type="date"
            formControlName="data_nascimento"
            class="w-full border rounded-lg p-2 focus:ring-2 focus:ring-blue-500"
          />
          @if (f['data_nascimento'].touched && f['data_nascimento'].invalid) {
          <div class="text-red-500 text-sm mt-1">
            <span>Data de nascimento é obrigatória.</span>
          </div>
          }
        </div>
        <div>
          <label class="block mb-1 font-medium text-gray-700">CPF</label>
          <input
            type="text"
            formControlName="cpf"
            class="w-full border rounded-lg p-2 focus:ring-2 focus:ring-blue-500"
            placeholder="Somente números"
            maxlength="11"
          />
          @if (f['cpf'].touched && f['cpf'].invalid) {
          <div class="text-red-500 text-sm mt-1">
            @if (f['cpf'].errors?.['required']) {
            <span>CPF é obrigatório.</span>
            } @if (f['cpf'].errors?.['cpfInvalido']) {
            <span>CPF inválido.</span>
            }
          </div>
          }
        </div>
        <div>
          <label class="block mb-1 font-medium text-gray-700">Email</label>
          <input
            type="email"
            formControlName="email"
            class="w-full border rounded-lg p-2 focus:ring-2 focus:ring-blue-500"
            placeholder="Digite o email"
          />
          @if (f['email'].touched && f['email'].invalid) {
          <div class="text-red-500 text-sm mt-1">
            @if (f['email'].errors?.['required']) {
            <span>Email é obrigatório.</span>
            } @if (f['email'].errors?.['email']) {
            <span>Formato de email inválido.</span>
            }
          </div>
          }
        </div>
        @if (!aluno?.id) {
        <div>
          <label class="block mb-1 font-medium text-gray-700">Senha</label>
          <input
            type="password"
            formControlName="senha"
            class="w-full border rounded-lg p-2 focus:ring-2 focus:ring-blue-500"
            placeholder="Senha do aluno"
          />
          @if (f['senha'].touched && f['senha'].invalid) {
            <div class="text-red-500 text-sm mt-1">
              @if (f['senha'].errors?.['required']) {
                <span>Senha é obrigatória.</span>
              }
              @if (f['senha'].errors?.['senhaFraca']) {
                <span>Senha fraca. Use mínimo 8 caracteres, incluindo maiúsculas, minúsculas, números e símbolos.</span>
              }
            </div>
          }
        </div>
        }
      </form>
    </div>

    <!-- Ações -->
    <div class="flex justify-end gap-2">
      <button
        (click)="onClose()"
        class="cursor-pointer px-4 py-2 bg-gray-300 rounded hover:bg-gray-400"
      >
        Cancelar
      </button>
      <button
        (click)="onSave()"
        class="cursor-pointer px-4 py-2 bg-blue-600 text-white rounded hover:bg-blue-700"
      >
        Confirmar
      </button>
    </div>
  </div>
</div>
